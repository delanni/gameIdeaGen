<DOCYPE html>
<html>
	<head>
		<style type="text/css">
			
		</style>
		<title> Game Idea Generator </title>
	</head>
	<body>
		<form>
			<h1 id="nameLabel"></h1>
			<div><label>Genre: </label><label id="genreLabel"></label></div>
			<div><label>Theme: </label><label id="themeLabel"></label></div>
			<div><label>Core Mechanics: </label><label id="coreMechanicsLabel"></label></div>
			<div><label>Extra: </label><label id="extraLabel"></label></div>
		</form>
		<input type='button' value='Hit me!' onclick="pick()"></input>
		
		<script type="text/javascript">
			window.onerror = function(e){
				alert(e);
			}
		
			function bind(object, prop, target, targetField){
				if (!Object.observe) return;
				Object.observe(object,function(changes){
					changes.forEach(function(change){
						if (change.name != prop) return;
						target[targetField] = change.object[change.name];
					});
				});
			}
			
			var stateObject = {
				genre:"",
				theme:"",
				coreMechanics:"",
				extra:"",
				name:""
			};
			
			var k = Object.keys(stateObject);
			k.forEach(function(objectProperty){
				bind(stateObject, objectProperty, document.getElementById(objectProperty + "Label"), "textContent");
			});
			
			Array.prototype.random = function(){
				return this[Math.floor(Math.random()*this.length)];
			};
			
			Object.prototype.map = function(transfn){
				var k = Object.keys(this);
				var out = {};
				for(var i=0;i<k.length;i++){
					out[k[i]] = transfn(this[k[i]]);
				}
				return out;
			};
			
			Object.prototype.mixin = function(otherObj){
				var k = Object.keys(otherObj);
				for(var i=0;i<k.length;i++){
					this[k[i]] = otherObj[k[i]];
				}
			}
			
			var possibilities = {
				genre:["Stealth", "Sandbox", "Racing", "Sports", "Maze","MOBA","Fighting", "Action", "Platformer", "FPS", "RTS", "Turn based", "Simulation", "Toilet-game", "Role playing"],
				theme:["Ghost", "Cat", "Pixies","Apocalypse", "Dragon", "Horror", "Time travel", "World war","Ninjas","Pirates","Aliens","Business","Superheroes", "Animals", "Zombies", "Middle ages", "Tech", "Hell", "Ponycorn"],
				coreMechanics:["Risk and reward","Worker placement","Pointless", "Waiting", "Cards", "Capture/eliminate","Tap-tap","Timed interaction","Micro management", "Run around", "Explosions", "Agility", "WASD"],
				extra:["Audio", "RPG elements", "BLOOD BLOOD", "2d", "3d", "Explosions"]
			}
			
			function generateName(){
				return ["Raiders","Killers","6 feet", "Omiguzu", "Brothers", "Blood", "Heroes", "Zombies", "Mommy", "Key"].random() + 
				[" of ",""," and ", " without ", " of the", " against ", " who love ", " vs. ", " for ", " and the ", " to the "].random() +
				["Iwagashi", "Pidgeons", "Nokia","SKELETOR", "DIRT", "seven seas", "Monkey bees", "Dogz", "Unlimited", "Starforce", "Universe", "Death"].random();
			}
			
			function pick(){
				var choice = possibilities.map(function(trait){
					return trait.random();
				});
				choice.name = generateName();
				
				if (Object.observe){
					stateObject.mixin(choice);
					return;
				}
				
				Object.keys(stateObject).forEach(function(k){
					document.getElementById(k+"Label").textContent = choice[k];
				});
			}
			
		</script>
		<footer>Â©Sphynx ag., 2015</footer>
	</body>
</html>
